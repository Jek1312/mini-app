<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Telegram Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            padding: 16px;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 24px 0;
            border-bottom: 2px solid var(--tg-theme-hint-color, #999);
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--tg-theme-text-color, #000);
        }

        .header p {
            font-size: 16px;
            color: var(--tg-theme-hint-color, #999);
        }

        .user-card {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: white;
            margin: 0 auto 16px;
        }

        .user-info {
            text-align: center;
        }

        .user-info h2 {
            font-size: 22px;
            margin-bottom: 4px;
            color: var(--tg-theme-text-color, #000);
        }

        .user-info p {
            font-size: 14px;
            color: var(--tg-theme-hint-color, #999);
        }

        .features {
            margin-bottom: 24px;
        }

        .feature-card {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 16px;
            transition: transform 0.2s;
        }

        .feature-card:active {
            transform: scale(0.98);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .feature-content {
            flex: 1;
        }

        .feature-content h3 {
            font-size: 16px;
            margin-bottom: 4px;
            color: var(--tg-theme-text-color, #000);
        }

        .feature-content p {
            font-size: 14px;
            color: var(--tg-theme-hint-color, #999);
        }

        .button {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 12px;
            transition: opacity 0.2s;
        }

        .button:active {
            opacity: 0.8;
        }

        .button.secondary {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            color: var(--tg-theme-text-color, #000);
        }

        .info-block {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            padding: 16px;
            margin-top: 24px;
        }

        .info-block h3 {
            font-size: 16px;
            margin-bottom: 12px;
            color: var(--tg-theme-text-color, #000);
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--tg-theme-hint-color, rgba(0,0,0,0.1));
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            color: var(--tg-theme-hint-color, #999);
            font-size: 14px;
        }

        .info-value {
            color: var(--tg-theme-text-color, #000);
            font-size: 14px;
            font-weight: 500;
        }

        .counter {
            text-align: center;
            padding: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            color: white;
            margin-bottom: 24px;
        }

        .counter h3 {
            font-size: 18px;
            margin-bottom: 12px;
        }

        .counter-value {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 16px;
        }

        .counter-buttons {
            display: flex;
            gap: 12px;
        }

        .counter-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid white;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 12px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
        }

        .counter-btn:active {
            background: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Mini App Demo</h1>
            <p>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Telegram Mini Apps</p>
        </div>

        <div class="user-card">
            <div class="user-avatar" id="avatar">üë§</div>
            <div class="user-info">
                <h2 id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                <p id="userStatus">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram...</p>
            </div>
        </div>

        <div class="counter">
            <h3>–°—á—ë—Ç—á–∏–∫</h3>
            <div class="counter-value" id="counterValue">0</div>
            <div class="counter-buttons">
                <button class="counter-btn" onclick="decrementCounter()">‚àí</button>
                <button class="counter-btn" onclick="resetCounter()">‚Ü∫</button>
                <button class="counter-btn" onclick="incrementCounter()">+</button>
            </div>
        </div>

        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">üé®</div>
                <div class="feature-content">
                    <h3>–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ç–µ–º–∞</h3>
                    <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ —Ç–µ–º—É Telegram</p>
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <div class="feature-content">
                    <h3>–ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞</h3>
                    <p>–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫</p>
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üîí</div>
                <div class="feature-content">
                    <h3>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
                    <p>–ó–∞—â–∏—â—ë–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram API</p>
                </div>
            </div>
        </div>

        <button class="button" onclick="showAlert()">
            üì¢ –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        </button>

        <button class="button secondary" onclick="confirmAction()">
            ‚ùì –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
        </button>

        <button class="button" onclick="hapticFeedback()">
            üì≥ –í–∏–±—Ä–∞—Ü–∏—è (Haptic)
        </button>

        <button class="button secondary" onclick="shareApp()">
            üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
        </button>

        <div class="info-block">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h3>
            <div class="info-item">
                <span class="info-label">–í–µ—Ä—Å–∏—è API</span>
                <span class="info-value" id="apiVersion">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</span>
                <span class="info-value" id="platform">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞</span>
                <span class="info-value" id="colorScheme">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">–Ø–∑—ã–∫</span>
                <span class="info-value" id="language">-</span>
            </div>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        let counter = 0;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        tg.ready();
        tg.expand();

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞
        tg.setHeaderColor('#667eea');

        // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function initUser() {
            const user = tg.initDataUnsafe.user;
            
            if (user) {
                const fullName = user.first_name + (user.last_name ? ' ' + user.last_name : '');
                const initial = user.first_name.charAt(0).toUpperCase();
                
                document.getElementById('userName').textContent = fullName;
                document.getElementById('userStatus').textContent = '@' + (user.username || '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram');
                document.getElementById('avatar').textContent = initial;
            } else {
                document.getElementById('userName').textContent = '–î–µ–º–æ —Ä–µ–∂–∏–º';
                document.getElementById('userStatus').textContent = '–û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞';
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
        function updateAppInfo() {
            document.getElementById('apiVersion').textContent = tg.version;
            document.getElementById('platform').textContent = tg.platform;
            document.getElementById('colorScheme').textContent = tg.colorScheme === 'dark' ? '–¢—ë–º–Ω–∞—è' : '–°–≤–µ—Ç–ª–∞—è';
            document.getElementById('language').textContent = tg.initDataUnsafe.user?.language_code?.toUpperCase() || 'RU';
        }

        // –§—É–Ω–∫—Ü–∏–∏ —Å—á—ë—Ç—á–∏–∫–∞
        function incrementCounter() {
            counter++;
            updateCounter();
            tg.HapticFeedback.impactOccurred('light');
        }

        function decrementCounter() {
            counter--;
            updateCounter();
            tg.HapticFeedback.impactOccurred('light');
        }

        function resetCounter() {
            counter = 0;
            updateCounter();
            tg.HapticFeedback.impactOccurred('medium');
        }

        function updateCounter() {
            document.getElementById('counterValue').textContent = counter;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showAlert() {
            tg.showAlert('–≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è Telegram! üéâ');
            tg.HapticFeedback.notificationOccurred('success');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
        function confirmAction() {
            tg.showConfirm('–í—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ?', (confirmed) => {
                if (confirmed) {
                    tg.showAlert('–î–µ–π—Å—Ç–≤–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ! ‚úÖ');
                    tg.HapticFeedback.notificationOccurred('success');
                } else {
                    tg.HapticFeedback.notificationOccurred('error');
                }
            });
        }

        // –í–∏–±—Ä–∞—Ü–∏—è
        function hapticFeedback() {
            tg.HapticFeedback.impactOccurred('heavy');
            setTimeout(() => {
                tg.HapticFeedback.impactOccurred('medium');
                setTimeout(() => {
                    tg.HapticFeedback.impactOccurred('light');
                }, 100);
            }, 100);
        }

        // –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
        function shareApp() {
            const url = window.location.href;
            const text = '–ü–æ–ø—Ä–æ–±—É–π —ç—Ç–æ –∫—Ä—É—Ç–æ–µ Telegram Mini App! üöÄ';
            tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`);
            tg.HapticFeedback.notificationOccurred('success');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            initUser();
            updateAppInfo();
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —Ç–µ–º—ã
        tg.onEvent('themeChanged', () => {
            updateAppInfo();
        });
    </script>
</body>
</html>
